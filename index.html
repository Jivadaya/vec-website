<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ISKCON Values For All â€” National Value Education Contest 2026</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #ff9933;
            --primary-light: #ffb366;
            --primary-dark: #e68a2e;
            --maroon: #7c2d12;
            --maroon-light: #991b1b;
            --accent: #10b981;
            --blue: #3b82f6;
            --text: #1e293b;
            --text-light: #64748b;
            --bg: #ffffff;
            --bg-subtle: #f8fafc;
            --border: #e2e8f0;
            --shadow: rgba(15, 23, 42, 0.08);
            --shadow-lg: rgba(15, 23, 42, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: var(--text);
            background: var(--bg);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            line-height: 1.6;
        }

        a {
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        /* ==================== NAVIGATION ==================== */
        nav {
            position: sticky;
            top: 0;
            z-index: 1100;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            border-bottom: 1px solid var(--border);
        }

        .nav-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 18px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 24px;
        }

        .logo {
            display: flex;
            gap: 14px;
            align-items: center;
        }

        .logo img {
            height: 48px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 1.15rem;
            color: var(--maroon);
            font-weight: 800;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        .logo-sub {
            font-size: 0.75rem;
            color: var(--text-light);
            font-weight: 600;
            letter-spacing: 0.05em;
        }

        .nav-links {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 600;
            padding: 10px 18px;
            border-radius: 10px;
            font-size: 0.95rem;
            transition: all 0.2s ease;
        }

        .nav-links a:hover {
            color: var(--maroon);
            background: var(--bg-subtle);
        }

        .nav-cta-btn {
            background: var(--primary);
            color: white;
            padding: 11px 22px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-left: 12px;
            box-shadow: 0 4px 12px rgba(255, 153, 51, 0.25);
            border: none;
            cursor: pointer;
        }

        .nav-cta-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 153, 51, 0.35);
        }

        /* Mobile Navigation */
        @media (max-width: 768px) {
            .nav-container {
                padding: 14px 16px;
            }

            .logo img {
                height: 40px;
            }

            .logo-title {
                font-size: 1rem;
            }

            .logo-sub {
                font-size: 0.7rem;
            }

            .nav-links {
                display: none;
            }

            .nav-cta-btn {
                padding: 10px 16px;
                font-size: 0.85rem;
                margin-left: 0;
            }
        }

        /* ==================== HERO SECTION ==================== */
        .hero {
            max-width: 1280px;
            margin: 0 auto;
            padding: 100px 24px 60px;
            display: grid;
            grid-template-columns: 1fr 500px;
            gap: 80px;
            align-items: center;
        }

        .hero-left {
            animation: fadeInUp 0.8s ease;
        }

        .hero-right {
            animation: fadeInRight 0.8s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .subtitle {
            color: var(--primary);
            font-weight: 800;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            font-size: 0.85rem;
            margin-bottom: 14px;
        }

        /* Result Announcement Pill */
        .result-pill {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: rgba(255, 153, 51, 0.08);
            border: 1px solid rgba(255, 153, 51, 0.2);
            padding: 8px 16px;
            border-radius: 100px;
            margin-bottom: 24px;
            animation: shimmer 3s infinite;
            position: relative;
            overflow: hidden;
        }

        .result-pill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: pulse-light 3s infinite;
        }

        .result-badge-live {
            background: var(--primary);
            color: white;
            padding: 4px 10px;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 800;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .pill-text {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--maroon);
        }

        @keyframes shimmer {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 153, 51, 0.2);
            }

            50% {
                box-shadow: 0 0 15px 5px rgba(255, 153, 51, 0.1);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 153, 51, 0.2);
            }
        }

        @keyframes pulse-light {
            0% {
                left: -100%;
            }

            50% {
                left: 100%;
            }

            100% {
                left: 100%;
            }
        }

        h1 {
            font-size: clamp(2.2rem, 5vw, 3.5rem);
            margin-bottom: 24px;
            line-height: 1.15;
            font-weight: 900;
            color: var(--maroon);
            letter-spacing: -0.03em;
        }

        .tagline {
            color: var(--text-light);
            max-width: 60ch;
            font-size: 1.15rem;
            line-height: 1.75;
            font-weight: 400;
        }

        .hero-right img {
            width: 100%;
            border-radius: 20px;
            box-shadow: 0 25px 70px var(--shadow-lg);
        }

        /* Hero Stats */
        .hero-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--bg-subtle) 0%, #fff 100%);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid var(--border);
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px var(--shadow);
            border-color: var(--primary);
        }

        .stat-card strong {
            display: block;
            color: var(--primary);
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 6px;
            font-variant-numeric: tabular-nums;
        }

        .stat-card .label {
            color: var(--text-light);
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Hero Actions */
        .hero-actions {
            margin-top: 40px;
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
        }

        .btn-primary-hero {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--primary);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 153, 51, 0.3);
        }

        .btn-primary-hero:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 28px rgba(255, 153, 51, 0.4);
        }

        .btn-secondary-hero {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: var(--text);
        }

        .btn-secondary-hero:hover {
            border-color: var(--primary);
            background: var(--bg-subtle);
            transform: translateY(-3px);
        }



        /* Event Card Styles */
        .event-card-container {
            background: linear-gradient(135deg, #fff 0%, #fffbf7 100%);
            border: 2px solid rgba(255, 153, 51, 0.2);
            border-radius: 24px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(255, 153, 51, 0.15);
            position: relative;
            overflow: hidden;
            animation: floatCard 6s ease-in-out infinite;
            max-width: 100%;
            margin: 0 auto;
        }

        /* Magic Announcement on Left */
        .magic-announcement {
            animation: magicGlow 4s infinite alternate;
            border-radius: 100px;
            display: inline-block;
            margin-bottom: 24px;
        }

        @keyframes magicGlow {
            0% {
                box-shadow: 0 0 10px rgba(255, 153, 51, 0.2);
                border-color: rgba(255, 153, 51, 0.2);
            }

            100% {
                box-shadow: 0 0 25px rgba(255, 153, 51, 0.5);
                border-color: rgba(255, 153, 51, 0.6);
            }
        }

        .event-card-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--maroon) 100%);
        }

        .event-label {
            display: inline-block;
            color: var(--text-light);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .event-title {
            font-size: 1.8rem;
            color: var(--maroon);
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 24px;
        }

        .event-date {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .date-day {
            font-size: 5rem;
            font-weight: 900;
            color: var(--primary);
            line-height: 1;
            text-shadow: 4px 4px 0px rgba(255, 153, 51, 0.1);
        }

        .date-month-year {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            text-align: left;
        }

        .date-month {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text);
            line-height: 1;
        }

        .date-year {
            font-size: 1.2rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .event-context {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--text);
            border-top: 1px solid var(--border);
            padding-top: 20px;
            margin-top: 10px;
        }

        @keyframes floatCard {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }



        @media (max-width: 768px) {
            .hero {
                grid-template-columns: 1fr;
                gap: 40px;
                padding: 50px 20px 40px;
            }

            .hero-right {
                order: -1;
            }

            h1 {
                font-size: 2rem;
            }

            .tagline {
                font-size: 1rem;
            }

            .hero-stats {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-card strong {
                font-size: 2rem;
            }

            .hero-actions {
                flex-direction: column;
            }

            .btn-primary-hero,
            .btn-secondary-hero {
                width: 100%;
                justify-content: center;
            }
        }

        /* ==================== QUICK LINKS SECTION ==================== */
        .quick-section {
            max-width: 1280px;
            margin: 80px auto;
            padding: 0 24px;
        }

        .section-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .section-title {
            font-weight: 800;
            font-size: 2.2rem;
            color: var(--maroon);
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .section-description {
            color: var(--text-light);
            font-size: 1.1rem;
            max-width: 65ch;
            margin: 0 auto;
        }

        .quick-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .quick-card {
            background: linear-gradient(135deg, #fff 0%, var(--bg-subtle) 100%);
            border-radius: 16px;
            padding: 28px;
            display: flex;
            align-items: flex-start;
            gap: 20px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px var(--shadow-lg);
            border-color: var(--primary);
        }

        .quick-icon {
            width: 64px;
            height: 64px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .icon-whatsapp {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
        }

        .icon-submit {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }

        .icon-guide {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }

        .icon-results {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .quick-content h3 {
            font-weight: 700;
            color: var(--text);
            font-size: 1.15rem;
            margin-bottom: 6px;
        }

        .quick-content p {
            font-size: 0.9rem;
            color: var(--text-light);
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .quick-section {
                margin: 60px auto;
                padding: 0 20px;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .quick-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .quick-card {
                padding: 20px;
                gap: 16px;
            }

            .quick-icon {
                width: 56px;
                height: 56px;
                font-size: 1.5rem;
            }
        }

        /* ==================== WHATSAPP SECTION ==================== */
        .whatsapp-section {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            padding: 100px 24px;
            color: white;
        }

        .whatsapp-container {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }

        .whatsapp-container h2 {
            font-size: 2.5rem;
            margin-bottom: 16px;
            font-weight: 900;
            letter-spacing: -0.02em;
        }

        .whatsapp-container>p {
            font-size: 1.15rem;
            margin-bottom: 48px;
            opacity: 0.95;
            line-height: 1.7;
        }

        .whatsapp-card {
            background: white;
            padding: 48px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        .whatsapp-card h3 {
            color: #128C7E;
            margin-bottom: 32px;
            font-size: 1.6rem;
            font-weight: 800;
        }

        @media (max-width: 768px) {
            .whatsapp-section {
                padding: 60px 20px;
            }

            .whatsapp-container h2 {
                font-size: 2rem;
            }

            .whatsapp-card {
                padding: 32px 24px;
            }
        }

        /* ==================== RESULTS SECTION ==================== */
        .results-section {
            background: linear-gradient(135deg, var(--bg-subtle) 0%, #fff 100%);
            padding: 100px 24px;
            position: relative;
            overflow: hidden;
        }

        .results-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--maroon) 100%);
        }

        .results-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .results-card {
            background: white;
            border-radius: 24px;
            padding: 48px;
            box-shadow: 0 20px 60px var(--shadow-lg);
            border: 1px solid var(--border);
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-badge {
            display: inline-block;
            background: linear-gradient(135deg, rgba(255, 153, 51, 0.1) 0%, rgba(255, 153, 51, 0.05) 100%);
            color: var(--primary);
            padding: 10px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.85rem;
            letter-spacing: 0.1em;
            margin-bottom: 16px;
            border: 1px solid rgba(255, 153, 51, 0.2);
        }

        .results-header h2 {
            font-size: 2.2rem;
            font-weight: 900;
            color: var(--maroon);
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .results-header p {
            color: var(--text-light);
            font-size: 1.05rem;
            line-height: 1.6;
        }

        .search-box {
            position: relative;
            margin-bottom: 24px;
        }

        .search-input-wrapper {
            position: relative;
            display: flex;
            background: var(--bg-subtle);
            padding: 6px;
            border-radius: 16px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .search-input-wrapper:focus-within {
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 4px rgba(255, 153, 51, 0.1);
        }

        .search-input-wrapper input {
            flex: 1;
            background: transparent;
            border: none;
            font-size: 1.15rem;
            font-weight: 700;
            padding: 14px 20px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--text);
        }

        .search-input-wrapper input:focus {
            outline: none;
        }

        .search-input-wrapper input::placeholder {
            color: var(--text-light);
            opacity: 0.5;
            font-weight: 600;
        }

        .search-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .search-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .search-btn:active {
            transform: scale(0.95);
        }

        .error-message {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #991b1b;
            padding: 16px 20px;
            border-radius: 12px;
            border: 1px solid #fca5a5;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            animation: shake 0.5s;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        .result-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 40px;
            width: 100%;
        }

        .certificate-box {
            animation: magicalShow 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) both;
            background: linear-gradient(135deg, #fff 0%, #fff8f0 100%);
            border: 2px solid var(--primary);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 45px rgba(255, 153, 51, 0.2);
            position: relative;
            overflow: hidden;
        }

        .certificate-box::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 153, 51, 0.1) 0%, transparent 70%);
            z-index: 0;
            pointer-events: none;
            animation: pulseGlow 3s infinite alternate;
        }

        @keyframes magicalShow {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(40px);
                filter: blur(10px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
                filter: blur(0);
            }
        }

        @keyframes pulseGlow {
            from {
                opacity: 0.3;
                transform: scale(0.9);
            }

            to {
                opacity: 0.7;
                transform: scale(1.1);
            }
        }

        .certificate-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 24px;
            text-shadow: 0 4px 12px rgba(255, 153, 51, 0.3);
        }

        .student-name {
            font-size: 2rem;
            font-weight: 800;
            color: var(--maroon);
            margin-bottom: 8px;
        }

        .student-grade {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 30px;
            font-weight: 600;
        }

        .download-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 153, 51, 0.4);
        }

        /* Premium Searchable District Dropdown Styles */
        .premium-dropdown {
            position: relative;
            width: 100%;
        }

        .premium-dropdown-input {
            width: 100%;
            height: 50px;
            font-size: 1rem;
            border: 1px solid #cbd5e1;
            border-radius: 12px;
            padding: 0 45px 0 15px;
            font-weight: 600;
            color: #1e293b;
            background: #fff;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            cursor: pointer;
        }

        .premium-dropdown-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 153, 51, 0.1);
            background: #fff;
        }

        .premium-dropdown-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #94a3b8;
            font-size: 0.9rem;
            transition: transform 0.3s ease;
        }

        .premium-dropdown.active .premium-dropdown-icon {
            transform: translateY(-50%) rotate(180deg);
            color: var(--primary);
        }

        .premium-dropdown-list {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: #ffffff;
            border-radius: 14px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            max-height: 280px;
            overflow-y: auto;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 transparent;
        }

        .premium-dropdown.active .premium-dropdown-list {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .premium-dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            color: #475569;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .premium-dropdown-item:hover {
            background: #fff8f1;
            color: var(--primary);
            padding-left: 20px;
        }

        .premium-dropdown-item.selected {
            background: #fff1e6;
            color: var(--primary);
        }

        .premium-dropdown-no-results {
            padding: 20px;
            text-align: center;
            color: #94a3b8;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 18px 36px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 14px;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(255, 153, 51, 0.3);
            text-decoration: none;
        }

        .download-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 153, 51, 0.4);
        }

        @media (max-width: 768px) {
            .results-section {
                padding: 60px 20px;
            }

            .results-card {
                padding: 32px 24px;
            }

            .results-header h2 {
                font-size: 1.8rem;
            }

            .search-input-wrapper input {
                font-size: 1rem;
                padding: 12px 16px;
            }

            .search-btn {
                width: 50px;
                height: 50px;
            }

            .certificate-box {
                padding: 24px;
            }

            .student-name {
                font-size: 1.5rem;
            }

            .download-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* ==================== GIFT BANNER ==================== */
        .gift-banner {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 80px 24px;
            text-align: center;
        }

        .gift-banner h3 {
            font-size: 2.2rem;
            margin-bottom: 20px;
            font-weight: 900;
            letter-spacing: -0.02em;
        }

        .gift-banner p {
            font-size: 1.15rem;
            max-width: 1000px;
            margin: 0 auto;
            line-height: 1.8;
            opacity: 0.95;
        }

        @media (max-width: 768px) {
            .gift-banner {
                padding: 60px 20px;
            }

            .gift-banner h3 {
                font-size: 1.8rem;
            }

            .gift-banner p {
                font-size: 1rem;
            }
        }

        /* ==================== CONTENT SECTIONS ==================== */
        .content-section {
            max-width: 1280px;
            margin: 100px auto;
            padding: 0 24px;
        }

        .content-section h2 {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--maroon);
            margin-bottom: 20px;
            letter-spacing: -0.02em;
        }

        .content-section h3 {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--maroon);
            margin-bottom: 16px;
            margin-top: 40px;
            letter-spacing: -0.02em;
        }

        .content-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-light);
            margin-bottom: 16px;
        }

        @media (max-width: 768px) {
            .content-section {
                margin: 60px auto;
                padding: 0 20px;
            }

            .content-section h2 {
                font-size: 1.8rem;
            }

            .content-section h3 {
                font-size: 1.5rem;
            }

            .content-section p {
                font-size: 1rem;
            }
        }

        /* ==================== SPECIAL SECTIONS ==================== */
        .special-section {
            background: var(--bg-subtle);
            padding: 100px 24px;
        }

        .special-section-white {
            background: white;
            padding: 100px 24px;
        }

        .container-custom {
            max-width: 1280px;
            margin: 0 auto;
        }

        /* Photo Gallery */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 48px;
        }

        .photo-item {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: all 0.3s ease;
            padding: 24px;
            text-align: center;
        }

        .photo-item:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px var(--shadow-lg);
            border-color: var(--primary);
        }

        .photo-item h4 {
            color: var(--maroon);
            margin-bottom: 8px;
            font-weight: 700;
            font-size: 1.15rem;
        }

        .photo-item p {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        /* Gifts Grid */
        .gifts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 48px;
        }

        .gift-item {
            background: white;
            padding: 40px 28px;
            border-radius: 16px;
            text-align: center;
            border: 2px solid var(--border);
            transition: all 0.3s ease;
        }

        .gift-item:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px var(--shadow-lg);
            border-color: var(--primary);
        }

        .gift-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
        }

        .gift-item h4 {
            color: var(--maroon);
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .gift-item p {
            color: var(--text-light);
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Syllabus Grid */
        .syllabus-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-top: 48px;
        }

        .syllabus-item {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 28px 24px;
            border-radius: 14px;
            text-align: center;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }

        .syllabus-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
        }

        /* Solution Grid */
        .solution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 28px;
            margin-top: 48px;
        }

        .solution-card {
            background: white;
            padding: 40px 32px;
            border-radius: 16px;
            text-align: center;
            border: 2px solid var(--border);
            border-top: 4px solid var(--primary);
            transition: all 0.3s ease;
        }

        .solution-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px var(--shadow-lg);
        }

        .solution-number {
            width: 64px;
            height: 64px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-weight: 900;
            font-size: 1.8rem;
            box-shadow: 0 6px 20px rgba(255, 153, 51, 0.3);
        }

        .solution-card h3 {
            color: var(--maroon);
            font-size: 1.5rem;
            margin-bottom: 14px;
            font-weight: 800;
        }

        .solution-card p {
            color: var(--text-light);
            line-height: 1.7;
            font-size: 1.05rem;
        }

        /* Videos */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }

        .video-item {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: all 0.3s ease;
        }

        .video-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px var(--shadow);
        }

        .video-item iframe {
            width: 100%;
            height: 280px;
            border: 0;
            display: block;
        }

        @media (max-width: 768px) {

            .special-section,
            .special-section-white {
                padding: 60px 20px;
            }

            .photo-grid,
            .gifts-grid,
            .syllabus-grid,
            .solution-grid,
            .video-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .video-item iframe {
                height: 220px;
            }
        }

        /* ==================== CONTACT SECTION ==================== */
        .contact-section {
            background: var(--bg-subtle);
            padding: 80px 24px;
            border-top: 1px solid var(--border);
        }

        .contact-card {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 48px;
            border-radius: 20px;
            box-shadow: 0 12px 40px var(--shadow);
            border: 1px solid var(--border);
            text-align: center;
        }

        .contact-badge {
            display: inline-block;
            background: rgba(255, 153, 51, 0.1);
            color: var(--primary);
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.85rem;
            letter-spacing: 0.1em;
            margin-bottom: 16px;
        }

        .contact-card h2 {
            font-size: 2rem;
            font-weight: 900;
            color: var(--maroon);
            margin-bottom: 24px;
            letter-spacing: -0.02em;
        }

        .contact-phone {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 18px 40px;
            background: #25D366;
            color: white;
            border-radius: 14px;
            font-weight: 700;
            font-size: 1.2rem;
            text-decoration: none;
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.3);
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .contact-phone:hover {
            background: #128C7E;
            transform: translateY(-3px);
            box-shadow: 0 8px 28px rgba(37, 211, 102, 0.4);
            color: white;
        }

        .contact-hours {
            color: var(--text-light);
            font-size: 0.95rem;
            margin-top: 16px;
        }

        @media (max-width: 768px) {
            .contact-section {
                padding: 60px 20px;
            }

            .contact-card {
                padding: 32px 24px;
            }

            .contact-card h2 {
                font-size: 1.7rem;
            }

            .contact-phone {
                width: 100%;
                justify-content: center;
                font-size: 1.1rem;
            }
        }

        /* ==================== FOOTER ==================== */
        footer {
            background: var(--maroon);
            color: white;
            padding: 60px 24px 40px;
            margin-top: 100px;
            border-top: 4px solid var(--primary);
        }

        .footer-content {
            max-width: 1280px;
            margin: 0 auto;
            text-align: center;
        }

        .footer-title {
            font-size: 1.4rem;
            font-weight: 800;
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .footer-content p {
            opacity: 0.9;
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .footer-year {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            opacity: 0.8;
            font-size: 0.95rem;
        }

        @media (max-width: 768px) {
            footer {
                padding: 48px 20px 32px;
            }

            .footer-title {
                font-size: 1.2rem;
            }

            .footer-content p {
                font-size: 0.95rem;
            }
        }

        /* ==================== MODAL ==================== */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.812);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-backdrop.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            width: 100%;
            max-width: 560px;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            animation: modalSlideUp 0.3s ease;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-header h3 {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--maroon);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            background: transparent;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-light);
            transition: all 0.2s ease;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .modal-close:hover {
            background: var(--bg-subtle);
            color: var(--maroon);
        }

        .modal-body p {
            color: var(--text-light);
            line-height: 1.7;
            margin-bottom: 28px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: var(--text);
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }

        .form-control {
            width: 100%;
            padding: 14px 18px;
            border-radius: 12px;
            border: 2px solid var(--border);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--bg-subtle);
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 153, 51, 0.1);
            outline: none;
            background: white;
        }

        .modal-action-btn {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: none;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 12px;
        }

        .modal-action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-whatsapp {
            background: #25D366;
            color: white;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
        }

        .btn-whatsapp:hover:not(:disabled) {
            background: #128C7E;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        @media (max-width: 768px) {
            .modal-content {
                padding: 28px 24px;
            }

            .modal-header h3 {
                font-size: 1.3rem;
            }
        }

        /* ==================== FLOATING ACTION BUTTON ==================== */
        .fab-container {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1500;
            display: none;
            gap: 10px;
            padding: 12px 20px;
            background: white;
            border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
        }

        .fab-btn {
            border: none;
            border-radius: 50px;
            padding: 10px 18px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            background: transparent;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .fab-btn:hover {
            background: var(--bg-subtle);
        }

        .fab-whatsapp {
            color: #25D366;
        }

        .fab-submit {
            color: #3b82f6;
        }

        .fab-results {
            color: #f59e0b;
        }

        @media (max-width: 991px) {
            .fab-container {
                display: flex;
            }
        }

        @media (max-width: 480px) {
            .fab-container {
                padding: 10px 14px;
                gap: 6px;
            }

            .fab-btn {
                padding: 8px 14px;
                font-size: 0.85rem;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.02);
                opacity: 0.8;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Certificate Template hidden */
        #certLoading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">
                <img src="https://i.ibb.co/DfVR6KX8/iskcon-logo.png" alt="ISKCON logo">
                <div class="logo-text">
                    <div class="logo-title">ISKCON Values</div>
                    <div class="logo-sub">National VEC 2025-26</div>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 8px;">
                <div class="nav-links">
                    <a href="#quick">Quick Links</a>
                    <a href="#about">About</a>
                    <a href="#videos">Videos</a>
                    <a href="#gifts">Gifts</a>
                </div>
                <button class="nav-cta-btn" onclick="scrollToResults()">
                    <i class="fa-solid fa-award"></i> Check Results
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-left">
            <div class="subtitle">A Pan-India Initiative</div>
            <h1>National Value Education Contest <span style="color:var(--primary)">2026</span></h1>
            <p class="tagline">Empowering students across India with timeless wisdom from the <strong>Bhagavad
                    Gita</strong>. Join the largest contest for character building and ethical clarity.</p>

            <div class="hero-stats">
                <div class="stat-card">
                    <strong><span class="count" data-target="1350000">0</span>+</strong>
                    <div class="label">Students Impacted</div>
                </div>
                <div class="stat-card">
                    <strong><span class="count" data-target="4200">0</span>+</strong>
                    <div class="label">Schools</div>
                </div>
                <div class="stat-card">
                    <strong><span class="count" data-target="14">0</span>+</strong>
                    <div class="label">Years Running</div>
                </div>
            </div>

            <div class="hero-actions">
                <button class="btn-primary-hero" onclick="openModal('whatsapp')">
                    <i class="fa-brands fa-whatsapp"></i> Join WhatsApp Group
                </button>
                <button class="btn-secondary-hero" onclick="openModal('submit')">
                    <i class="fa-solid fa-paper-plane"></i> Submit Answers
                </button>
                <button class="btn-secondary-hero" onclick="scrollToResults()">
                    <i class="fa-solid fa-award"></i> Check Results
                </button>
            </div>
        </div>
        <div class="hero-right">
            <div class="event-card-container magic-announcement"
                style="border-radius: 24px; animation: magicGlow 4s infinite alternate, floatCard 6s ease-in-out infinite;">
                <div class="result-badge-live"
                    style="margin-bottom: 20px; display: inline-block; padding: 6px 14px; font-size: 0.8rem;">
                    ANNOUNCEMENT</div>
                <h2 class="event-title" style="font-size: 2.2rem; margin-bottom: 12px; line-height: 1.2;">Results are
                    Declared!</h2>
                <p
                    style="font-size: 1.1rem; color: var(--maroon); font-weight: 700; margin-bottom: 20px; line-height: 1.4;">
                    Your journey of wisdom <br> is being celebrated.
                </p>
                <div
                    style="background: white; padding: 20px; border-radius: 16px; border: 1px dashed var(--primary); margin-bottom: 25px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);">
                    <p
                        style="color: var(--text-light); font-weight: 600; font-size: 0.95rem; line-height: 1.6; margin: 0;">
                        Major district results are now live! <br>
                        <span style="color: var(--primary); font-weight: 700;">Other districts will be displayed
                            soon.</span>
                    </p>
                </div>
                <p style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 25px; font-weight: 500;">
                    <i class="fa-brands fa-whatsapp" style="color: #25D366; margin-right: 5px;"></i>
                    Follow your <strong>WhatsApp Group</strong> for live district-wise updates.
                </p>
                <button class="btn-primary-hero" onclick="scrollToResults()"
                    style="width: 100%; justify-content: center; padding: 18px;">
                    <i class="fa-solid fa-award"></i> Claim My Certificate
                </button>
            </div>
        </div>
    </section>

    <!-- Quick Links Section -->
    <section class="quick-section" id="quick">
        <div class="section-header">
            <h2 class="section-title">Essential Links & Actions</h2>
            <p class="section-description">Quick access to all important resources and updates</p>
        </div>

        <div class="quick-grid">
            <div class="quick-card" onclick="openModal('whatsapp')">
                <div class="quick-icon icon-whatsapp">
                    <i class="fa-brands fa-whatsapp"></i>
                </div>
                <div class="quick-content">
                    <h3>Join WhatsApp Group</h3>
                    <p>Get state & district updates instantly</p>
                </div>
            </div>

            <div class="quick-card" onclick="openModal('submit')">
                <div class="quick-icon icon-submit">
                    <i class="fa-solid fa-paper-plane"></i>
                </div>
                <div class="quick-content">
                    <h3>Submit Answers</h3>
                    <p>Upload your exam answer sheet</p>
                </div>
            </div>

            <div class="quick-card" onclick="alert('Study guide coming soon!')">
                <div class="quick-icon icon-guide">
                    <i class="fa-solid fa-book-open"></i>
                </div>
                <div class="quick-content">
                    <h3>Study Guide</h3>
                    <p>Syllabus & preparation materials</p>
                </div>
            </div>

            <div class="quick-card" onclick="scrollToResults()">
                <div class="quick-icon icon-results">
                    <i class="fa-solid fa-award"></i>
                </div>
                <div class="quick-content">
                    <h3>Check Results</h3>
                    <p>Download your certificate</p>
                </div>
            </div>
        </div>
    </section>


    <!-- WhatsApp Section -->
    <section class="whatsapp-section" id="whatsapp">
        <div class="whatsapp-container">
            <h2>Join Your District's WhatsApp Group</h2>
            <p>Get updates, study materials, and connect with fellow participants</p>

            <div class="whatsapp-card">
                <h3>Select Your State & District</h3>

                <div class="form-group">
                    <select id="wa_stateSelect" class="form-control">
                        <option value="">-- Select State --</option>
                    </select>
                </div>

                <div class="form-group">
                    <select id="wa_districtSelect" class="form-control">
                        <option value="">-- Select District --</option>
                    </select>
                </div>

                <a id="wa_openLink" class="btn-primary-hero" style="width: 100%; justify-content: center;">
                    <i class="fa-brands fa-whatsapp"></i> Open WhatsApp Group
                </a>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="results">
        <div class="results-container">
            <div class="results-card">
                <div class="results-header">
                    <span class="results-badge">VEC 2025-26 RESULTS</span>


                    <!-- Grading Scale -->
                    <div
                        style="margin: 25px 0; padding: 20px; background: linear-gradient(135deg, #f8fafc 0%, #fff 100%); border: 1px solid #e2e8f0; border-radius: 14px;">
                        <div
                            style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 14px;">
                            <i class="fa-solid fa-graduation-cap" style="color: var(--primary); font-size: 1.1rem;"></i>
                            <h4
                                style="margin: 0; font-size: 0.95rem; font-weight: 800; color: var(--text); text-transform: uppercase; letter-spacing: 0.05em;">
                                Grading Scale</h4>
                        </div>
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; font-size: 0.85rem;">
                            <div
                                style="padding: 8px 12px; background: #fff; border-radius: 8px; border: 1px solid #e5e7eb; text-align: center;">
                                <span style="font-weight: 800; color: #059669;">A+</span>
                                <span
                                    style="color: var(--text-light); font-weight: 600; margin-left: 4px;">81-100%</span>
                            </div>
                            <div
                                style="padding: 8px 12px; background: #fff; border-radius: 8px; border: 1px solid #e5e7eb; text-align: center;">
                                <span style="font-weight: 800; color: #10b981;">A</span>
                                <span
                                    style="color: var(--text-light); font-weight: 600; margin-left: 4px;">71-80%</span>
                            </div>
                            <div
                                style="padding: 8px 12px; background: #fff; border-radius: 8px; border: 1px solid #e5e7eb; text-align: center;">
                                <span style="font-weight: 800; color: #3b82f6;">B+</span>
                                <span
                                    style="color: var(--text-light); font-weight: 600; margin-left: 4px;">61-70%</span>
                            </div>
                            <div
                                style="padding: 8px 12px; background: #fff; border-radius: 8px; border: 1px solid #e5e7eb; text-align: center;">
                                <span style="font-weight: 800; color: #60a5fa;">B</span>
                                <span
                                    style="color: var(--text-light); font-weight: 600; margin-left: 4px;">51-60%</span>
                            </div>
                            <div
                                style="padding: 8px 12px; background: #fff; border-radius: 8px; border: 1px solid #e5e7eb; text-align: center;">
                                <span style="font-weight: 800; color: #f59e0b;">Passing</span>
                                <span style="color: var(--text-light); font-weight: 600; margin-left: 4px;">â‰¥33%</span>
                            </div>
                            <div
                                style="padding: 8px 12px; background: #fff; border-radius: 8px; border: 1px solid #e5e7eb; text-align: center;">
                                <span style="font-weight: 800; color: #94a3b8;">Participated</span>
                                <span style="color: var(--text-light); font-weight: 600; margin-left: 4px;">Below
                                    33%</span>
                            </div>
                        </div>
                    </div>

                    <p>Enter your 10-digit <strong>Mobile Number</strong> or <strong>Exam Code</strong> to generate your
                        official PDF certificate</p>
                </div>



                <div class="search-box"
                    style="background: #f8fafc; padding: 25px; border-radius: 20px; border: 1px solid #f1f5f9;">
                    <div class="form-group" style="margin-bottom: 25px;">
                        <label
                            style="display: block; margin-bottom: 12px; font-weight: 700; color: #475569; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em;">Step
                            1: Choose Your District</label>
                        <div class="premium-dropdown" id="districtDropdown">
                            <input type="text" id="districtInput" placeholder="ðŸ” Search or select district..."
                                class="premium-dropdown-input" readonly>
                            <div class="premium-dropdown-icon">
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div class="premium-dropdown-list" id="districtList">
                                <!-- Districts injected here -->
                            </div>
                            <input type="hidden" id="selectedDistrict">
                        </div>
                        <div id="districtStatsWrapper"
                            style="margin-top: 8px; font-size: 0.8rem; color: #64748b; font-weight: 600; display: flex; align-items: center; gap: 6px; opacity: 0.9; display: none;">
                            <span class="pulse-dot"
                                style="width: 6px; height: 6px; background: #22c55e; border-radius: 50%; display: inline-block;"></span>
                            <span id="districtDownloadCount">0</span> Certificates Issued in <span
                                id="statDistrictName">District</span>
                        </div>
                        <div id="nationwideStatsWrapper"
                            style="margin-top: 8px; font-size: 0.8rem; color: #64748b; font-weight: 600; display: flex; align-items: center; gap: 6px; opacity: 0.9;">
                            <span style="opacity: 0.6;">Total Nationwide:</span>
                            <span id="globalDownloadCount">0</span> Issued
                        </div>
                        <style>
                            .pulse-dot {
                                animation: pulse 2s infinite;
                            }

                            @keyframes pulse {
                                0% {
                                    opacity: 1;
                                }

                                50% {
                                    opacity: 0.4;
                                }

                                100% {
                                    opacity: 1;
                                }
                            }
                        </style>
                        <p
                            style="margin-top: 10px; font-size: 0.85rem; color: #64748b; font-weight: 500; display: flex; align-items: center; gap: 8px; padding-left: 4px;">
                            <i class="fa-solid fa-circle-info" style="color: var(--primary); font-size: 0.75rem;"></i>
                            District not visible? Regular updates are shared in your <a href="#whatsapp"
                                style="color: var(--primary); font-weight: 700; text-decoration: underline;">WhatsApp
                                Group</a>.
                        </p>
                    </div>


                    <div class="form-group" style="margin-bottom: 0;">
                        <label
                            style="display: block; margin-bottom: 12px; font-weight: 700; color: #475569; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em;">Step
                            2: Enter Roll No / Mobile</label>
                        <div class="search-input-wrapper"
                            style="box-shadow: 0 1px 2px rgba(0,0,0,0.05); border-radius: 12px; border: 1px solid #cbd5e1; background: white;">
                            <input type="text" id="vecCodeInput" placeholder="e.g. 9876543210 or VEC12345"
                                autocomplete="off" maxlength="10"
                                style="border: none; height: 50px; font-size: 1rem; font-weight: 600; padding: 0 15px;">
                            <button class="search-btn" id="searchBtn"
                                style="height: 50px; width: 55px; background: var(--primary); border-radius: 0 11px 11px 0; display: flex; align-items: center; justify-content: center; font-size: 1.1rem;">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </div>
                    </div>
                </div>


                <!-- Results Advisory Message -->
                <div
                    style="margin-top: 15px; text-align: center; padding: 12px; background: #fffbeb; border: 1px solid #fef3c7; border-radius: 12px; display: flex; align-items: center; gap: 10px; justify-content: center; max-width: 600px; margin-left: auto; margin-right: auto;">
                    <i class="fa-solid fa-circle-info" style="color: #d97706;"></i>
                    <p style="margin: 0; font-size: 0.9rem; font-weight: 700; color: #92400e; letter-spacing: -0.01em;">
                        Gwalior, Gautam Buddha Nagar and other district Results will be declared later.
                    </p>
                </div>

                <div id="errorDisplay" style="display: none;">
                    <div class="error-message">
                        <i class="fa-solid fa-circle-xmark"></i>
                        <span>No student record found. Please verify your Mobile Number or Exam Code.</span>
                    </div>
                </div>

                <div id="resultDisplay" class="result-display" style="display:none;">
                    <!-- Results injected here -->
                </div>

                <div id="resultsAdvisory"
                    style="margin-bottom: 30px; margin-top:30px; padding: 20px 25px; background: #fdfcfb; border: 1px solid #e5e7eb; border-radius: 16px; text-align: left; position: relative; overflow: hidden;">
                    <div
                        style="position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--primary);">
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 18px;">
                        <div
                            style="background: #fff8f1; width: 42px; height: 42px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 1.2rem; flex-shrink: 0;">
                            <i class="fa-solid fa-bell"></i>
                        </div>
                        <div>
                            <p
                                style="color: #475569; font-weight: 700; font-size: 1.05rem; margin-bottom: 4px; letter-spacing: -0.01em;">
                                Result Declaration Status</p>
                            <p
                                style="color: #64748b; font-weight: 500; font-size: 0.95rem; line-height: 1.5; margin: 0;">
                                Note: results are declared in phases. If yours isn't shown, please follow your <span
                                    style="color: var(--primary); font-weight: 600;">WhatsApp Group</span> for live
                                updates.
                            </p>
                        </div>
                    </div>
                </div>

                <div id="encouragingMessage"
                    style="margin-top: 0px; padding: 0px 0px; text-align: center; border-radius: 20px; background: #fff;">

                    <div style="display: inline-flex; flex-direction: column; align-items: center; gap: 12px;">
                        <div style="width: 40px; height: 1px; background: #e2e8f0;"></div>
                        <p
                            style="font-size: 1.15rem; font-weight: 800; color: var(--maroon); margin: 0; letter-spacing: -0.01em;">
                            Thank you for your patience.</p>
                        <p style="font-size: 1rem; font-weight: 600; color: var(--primary); margin: 0;">We are always
                            with you in this journey.</p>
                    </div>
                </div>
            </div>

            <!-- District Impact Leaderboard (Dedicated Section) -->
            <div id="districtImpactContainer"
                style="margin-top: 40px; background: white; border-radius: 20px; border: 1px solid #e2e8f0; overflow: hidden; display: none; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); width: 100%; max-width: 500px; margin-left: auto; margin-right: auto;">
                <div
                    style="background: #f8fafc; padding: 18px 25px; border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center;">
                    <h4
                        style="margin: 0; font-size: 0.9rem; color: #1e293b; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 800;">
                        <i class="fa-solid fa-trophy" style="margin-right: 10px; color: #f59e0b;"></i>
                        District Impact Leaderboard
                    </h4>
                    <span
                        style="font-size: 0.7rem; background: #dcfce7; color: #166534; padding: 5px 12px; border-radius: 12px; font-weight: 700; display: flex; align-items: center; gap: 6px;">
                        <span class="pulse-dot"
                            style="width: 6px; height: 6px; background: #22c55e; border-radius: 50%;"></span>
                        LIVE STATS
                    </span>
                </div>
                <div id="leaderboardScrollArea" style="max-height: 400px; overflow-y: auto;">
                    <div id="leaderboardLoader" style="padding: 50px 30px; text-align: center; color: #64748b;">
                        <i class="fa-solid fa-circle-notch fa-spin"
                            style="font-size: 1.5rem; color: var(--primary);"></i>
                        <span style="font-size: 0.9rem; display: block; margin-top: 15px; font-weight: 600;">Scanning
                            80,000+ Records...</span>
                        <div style="margin-top: 10px; font-size: 0.75rem; opacity: 0.7;" id="leaderboardProgress">
                            Starting scan...</div>
                    </div>
                    <table id="leaderboardTable"
                        style="width: 100%; border-collapse: collapse; font-size: 0.95rem; display: none;">
                        <thead style="position: sticky; top: 0; background: #f8fafc; z-index: 1;">
                            <tr>
                                <th
                                    style="text-align: left; padding: 15px 25px; color: #64748b; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; border-bottom: 1px solid #e2e8f0;">
                                    District</th>
                                <th
                                    style="text-align: right; padding: 15px 25px; color: #64748b; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; border-bottom: 1px solid #e2e8f0;">
                                    Issued</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody"></tbody>
                    </table>
                </div>
                <div style="background: white; padding: 15px 25px; border-top: 1px solid #e2e8f0; text-align: center;">
                    <span style="font-size: 0.8rem; color: #64748b; font-weight: 600;">
                        <i class="fa-solid fa-earth-asia" style="margin-right: 6px; color: var(--primary);"></i>
                        Impact across <span id="activeDistrictCount"
                            style="color: var(--primary); font-weight: 900;">0</span> Active Districts
                    </span>
                </div>
            </div>
        </div>
    </section>

    <!-- Gift Banner -->
    <div class="gift-banner" id="gifts">
        <h3>ðŸŽ Every Participant Receives</h3>
        <p>
            Complete Bhagavad Gita (All Languages) â€¢ VEC Booklet & Question Bank â€¢ Practice Answer Sheets â€¢ Calendar â€¢
            Certificate e-signed by Former ISRO Chairman â€¢ Flair Pens & Many More Gifts!
        </p>
    </div>

    <!-- About Section -->
    <section class="content-section" id="about">
        <h2>About the Value Education Contest</h2>
        <p><strong>ISKCON's "Values For All"</strong> is a nationwide initiative dedicated to instilling core ethical
            and moral values in young minds through the timeless teachings of the Bhagavad Gita. The VEC is an
            opportunity for students to not just compete, but to truly connect with profound spiritual wisdom and
            transform their lives.</p>
        <p>The contest is open for <strong>individual registrations</strong> across various states and cities in India,
            encouraging independent learning and personal growth.</p>
    </section>

    <!-- Photo Gallery -->
    <section class="special-section">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title">VEC in Action</h2>
                <p class="section-description">Moments from our award ceremonies and events across India</p>
            </div>

            <div class="photo-grid">
                <div class="photo-item">
                    <h4>Award Ceremony</h4>
                    <p>Celebrating excellence</p>
                </div>
                <div class="photo-item">
                    <h4>Student Winners</h4>
                    <p>Young achievers</p>
                </div>
                <div class="photo-item">
                    <h4>Mass Participation</h4>
                    <p>Thousands learning together</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Gifts & Prizes -->
    <section class="special-section-white">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title">Gifts & Recognition</h2>
                <p class="section-description">Every participant is a winner with valuable gifts and learning materials
                </p>
            </div>

            <div class="gifts-grid">
                <div class="gift-item">
                    <div class="gift-icon">ðŸ“–</div>
                    <h4>Complete Bhagavad Gita</h4>
                    <p>Available in all languages</p>
                </div>
                <div class="gift-item">
                    <div class="gift-icon">ðŸ“š</div>
                    <h4>Study Material</h4>
                    <p>VEC Booklet & Question Bank</p>
                </div>
                <div class="gift-item">
                    <div class="gift-icon">ðŸ†</div>
                    <h4>Certificate</h4>
                    <p>E-signed by Former ISRO Chairman</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Core Values -->
    <section class="special-section">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title">Core Values Covered</h2>
                <p class="section-description">Essential virtues for character building and holistic development</p>
            </div>
            <div class="syllabus-grid">
                <div class="syllabus-item">Cleanliness</div>
                <div class="syllabus-item">Forgiveness</div>
                <div class="syllabus-item">Tolerance</div>
                <div class="syllabus-item">Generosity</div>
                <div class="syllabus-item">Concentration</div>
                <div class="syllabus-item">Self-Confidence</div>
            </div>
        </div>
    </section>

    <!-- Solution Framework -->
    <section class="special-section-white">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title">Our Solution Framework</h2>
                <p class="section-description">How VEC builds character â€” step by step</p>
            </div>
            <div class="solution-grid">
                <div class="solution-card">
                    <div class="solution-number">1</div>
                    <h3>Awareness</h3>
                    <p>Introduce values through stories, Gita lessons and activities</p>
                </div>
                <div class="solution-card">
                    <div class="solution-number">2</div>
                    <h3>Practice</h3>
                    <p>Practice through classroom activities and roleplay</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Videos Section -->
    <section class="content-section" id="videos">
        <h3>Video Gallery & Testimonials</h3>
        <p>A glimpse into the VEC experience, success stories, and testimonials from students, parents, and educators.
        </p>
        <div class="video-grid">
            <div class="video-item">
                <iframe src="https://www.youtube-nocookie.com/embed/3uWc5Bl3Gj0" title="VEC Experience 1"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
                    loading="lazy"></iframe>
            </div>
            <div class="video-item">
                <iframe src="https://www.youtube-nocookie.com/embed/pwFhgRDQus0" title="VEC Experience 2"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
                    loading="lazy"></iframe>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section">
        <div class="contact-card">
            <span class="contact-badge">ANY QUERIES?</span>
            <h2>Kindly Contact Us</h2>
            <a href="tel:+918888022900" class="contact-phone">
                <i class="fa-solid fa-phone-volume"></i>
                <span>+91 8888022900</span>
            </a>
            <p class="contact-hours">Available Monday to Sunday (10 AM - 8 PM)</p>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-title">ISKCON Values â€” National VEC 2025-26</div>
            <p>Connecting students with timeless wisdom from the Bhagavad Gita</p>
            <div class="footer-year">
                &copy; <span id="footerYear"></span> ISKCON Values. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div class="modal-backdrop" id="modalBackdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i id="modalIcon" class="fa-brands fa-whatsapp"></i>
                    <span id="modalTitle">Join WhatsApp Group</span>
                </h3>
                <button class="modal-close" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <p id="modalDescription">Select your state and district to join the official WhatsApp group</p>

                <div class="form-group">
                    <label class="form-label">Select State</label>
                    <select id="stateSelect" class="form-control">
                        <option value="">-- Choose State --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Select District</label>
                    <select id="districtSelect" class="form-control">
                        <option value="">-- Choose District --</option>
                    </select>
                </div>

                <button id="modalActionBtn" class="modal-action-btn btn-whatsapp" disabled>
                    <i id="modalBtnIcon" class="fa-brands fa-whatsapp"></i>
                    <span id="modalBtnText">Open WhatsApp Group</span>
                </button>
            </div>
        </div>
    </div>

    </div>

    <div id="certLoading">
        <i class="fa-solid fa-circle-notch fa-spin fa-3x"></i>
        <p style="margin-top: 20px; font-size: 1.2rem;">Generating your Certificate...</p>
    </div>

    <script>
        // ==================== SUPABASE CONFIGURATION ====================
        const SUPABASE_URL = 'https://qnvhtrfdwihmyjerujqa.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFudmh0cmZkd2lobXlqZXJ1anFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAyNTY4MjcsImV4cCI6MjA4NTgzMjgyN30.9OQZ1Qcyttry8EazLV7XR88NFBLSKST9qBKp_SBiLPA';

        const sbClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);



        // WhatsApp links and other dynamic external data from Google Sheets
        const WHATSAPP_SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS25FQotsgdlN-k6xCO-gczCkMluhjMl59EC7rGVhaOGCM1WF4tC21KVXB7kxmneUVXTGWdrAlc1Hlh/pub?output=csv';
        let whatsappData = [];
        let stateMap = new Map();

        async function loadWhatsAppData() {
            try {
                const response = await fetch(WHATSAPP_SHEET_URL, { cache: 'no-store' });
                const csvText = await response.text();

                // Parse CSV (state, district, whatsapp_link, omr_link, result_link)
                const rows = csvText.split('\n').map(row => row.split(',').map(cell => cell.trim()));
                whatsappData = rows.slice(1).map(row => ({
                    state: row[0],
                    district: row[1],
                    whatsapp: row[2],
                    submit: row[3] || row[4] || row[2], // omr or result link, fallback to whatsapp
                    omr: row[3],
                    result: row[4]
                })).filter(item => item.district && item.state);

                // Build State -> Districts map
                stateMap = new Map();
                whatsappData.forEach(item => {
                    const s = item.state;
                    if (!stateMap.has(s)) stateMap.set(s, new Set());
                    stateMap.get(s).add(item.district);
                });

                console.log('Sheet data loaded:', whatsappData.length, 'districts');
                populateStateDropdowns();
            } catch (err) {
                console.error('Failed to load data from Sheets:', err);
            }
        }

        function populateStateDropdowns() {
            const stateSelects = [
                document.getElementById('stateSelect'),
                document.getElementById('wa_stateSelect')
            ];
            const states = Array.from(stateMap.keys()).sort();
            const options = '<option value="">-- Choose State --</option>' +
                states.map(s => `<option value="${s}">${s}</option>`).join('');

            stateSelects.forEach(sel => {
                if (sel) {
                    sel.innerHTML = options;
                    sel.disabled = false;
                }
            });
        }

        // ==================== DROPDOWN MANAGEMENT ====================
        function initializeDropdowns() {
            const stateSelect = document.getElementById('stateSelect');
            const districtSelect = document.getElementById('districtSelect');
            const actionBtn = document.getElementById('modalActionBtn');

            stateSelect.addEventListener('change', () => {
                const state = stateSelect.value;
                const districts = state ? Array.from(stateMap.get(state) || []).sort() : [];
                districtSelect.innerHTML = '<option value="">-- Choose District --</option>' +
                    districts.map(d => `<option value="${d}">${d}</option>`).join('');
                districtSelect.disabled = !state;
                if (actionBtn) actionBtn.disabled = true;
            });

            districtSelect.addEventListener('change', () => {
                const district = districtSelect.value;
                const state = stateSelect.value;
                const data = whatsappData.find(d => d.district === district && d.state === state);

                if (actionBtn) {
                    actionBtn.disabled = !district;
                    actionBtn.onclick = () => {
                        if (!data) return alert('Link coming soon...');
                        const link = (currentModalType === 'submit') ? data.submit : data.whatsapp;
                        if (link && link.startsWith('http')) window.open(link, '_blank');
                        else alert('Link not available yet.');
                    };
                }
            });
        }

        function initializeInlineWhatsApp() {
            const wa_state = document.getElementById('wa_stateSelect');
            const wa_district = document.getElementById('wa_districtSelect');
            const wa_btn = document.getElementById('wa_openLink');

            wa_state.addEventListener('change', () => {
                const state = wa_state.value;
                const districts = state ? Array.from(stateMap.get(state) || []).sort() : [];
                wa_district.innerHTML = '<option value="">-- Choose District --</option>' +
                    districts.map(d => `<option value="${d}">${d}</option>`).join('');
                wa_district.disabled = !state;
            });

            if (wa_btn) {
                wa_btn.onclick = (e) => {
                    e.preventDefault();
                    const state = wa_state.value;
                    const district = wa_district.value;
                    if (!state || !district) return alert('Please select State and District');

                    const data = whatsappData.find(d => d.district === district && d.state === state);
                    if (data && data.whatsapp && data.whatsapp.startsWith('http')) {
                        window.open(data.whatsapp, '_blank');
                    } else {
                        alert('WhatsApp group link coming soon...');
                    }
                };
            }
        }

        let globalDistricts = [];


        async function initializeResultsDistrictDropdown() {
            const districtDropdown = document.getElementById('districtDropdown');
            const districtInput = document.getElementById('districtInput');
            const districtList = document.getElementById('districtList');
            const selectedDistrictHidden = document.getElementById('selectedDistrict');

            districtList.innerHTML = '<div class="premium-dropdown-no-results"><i class="fa-solid fa-circle-notch fa-spin"></i> Loading districts...</div>';

            try {
                // 1. Call the SQL function we just created (RPC)
                // This is "Heavy Traffic" ready because it only sends 1 request
                const { data, error } = await sbClient.rpc('get_unique_districts');

                if (error) throw error;

                // 2. Map the database results to our global array
                globalDistricts = data.map(item => item.dist_name || item.District).filter(Boolean);

                if (globalDistricts.length === 0) {
                    districtList.innerHTML = '<div class="premium-dropdown-no-results">No districts found in database.</div>';
                    return;
                }

                // 3. Render the dropdown items
                renderDistrictDropdown(globalDistricts);

                // This updates the other district selectors (like in the WhatsApp section)
                updateAllOtherDistrictSelects(globalDistricts);

            } catch (err) {
                console.error('Supabase district fetch failed:', err);
                districtList.innerHTML = '<div class="premium-dropdown-no-results">Unable to load districts. Please check connection.</div>';
            }

            // --- Dropdown Interaction Logic (Keep this part) ---
            districtInput.addEventListener('click', (e) => {
                e.stopPropagation();
                districtDropdown.classList.toggle('active');
                if (districtDropdown.classList.contains('active')) {
                    districtInput.readOnly = false;
                    districtInput.placeholder = 'Type to search...';
                    renderDistrictDropdown(globalDistricts);
                    districtInput.focus();
                }
            });

            districtInput.addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase().trim();
                const filtered = globalDistricts.filter(d => d.toLowerCase().includes(term));
                renderDistrictDropdown(filtered);
            });

            document.addEventListener('click', (e) => {
                if (!districtDropdown.contains(e.target)) closeDistrictDropdown();
            });
        }




        async function updateDistrictStats(district) {
            if (!district) return;

            const statsWrapper = document.getElementById('districtStatsWrapper');
            const nationwideWrapper = document.getElementById('nationwideStatsWrapper');
            const countEl = document.getElementById('districtDownloadCount');
            const nameEl = document.getElementById('statDistrictName');

            if (statsWrapper) statsWrapper.style.display = 'flex';
            if (nationwideWrapper) nationwideWrapper.style.display = 'none';
            if (nameEl) nameEl.innerText = district;

            try {
                // Sum download counts for the specific district
                const { data, error } = await sbClient
                    .from('students')
                    .select('"Download Count"')
                    .eq('District', district)
                    .not('Download Count', 'is', null);

                if (error) throw error;

                const total = data.reduce((sum, row) => sum + (row["Download Count"] || 0), 0);
                if (countEl) {
                    const current = parseInt(countEl.innerText.replace(/,/g, '')) || 0;
                    animateValue(countEl, current, total, 1000);
                }
            } catch (err) {
                console.warn('District stats fetch failed:', err);
            }
        }

        async function fetchDistrictLeaderboard() {
            const container = document.getElementById('districtImpactContainer');
            const table = document.getElementById('leaderboardTable');
            const body = document.getElementById('leaderboardBody');
            const loader = document.getElementById('leaderboardLoader');
            const countLabel = document.getElementById('activeDistrictCount');
            const globalStatsEl = document.getElementById('globalDownloadCount');

            if (container) container.style.display = 'block';

            try {


                // CALL THE SQL FUNCTION (One single request!)
                const { data, error } = await sbClient.rpc('get_district_leaderboard');

                if (error) throw error;

                if (!data || data.length === 0) {
                    if (loader) loader.innerHTML = '<span>No downloads tracked yet.</span>';
                    return;
                }

                // Update active district count
                if (countLabel) countLabel.innerText = data.length;

                // Render the table rows
                body.innerHTML = data.map((row, index) => {
                    // This handles both 'dist_name' and 'District' as fallback
                    const name = row.dist_name || row.District || "Unknown";
                    const count = row.issued_count || row.sum || 0;

                    return `
                        <tr style="border-bottom: 1px solid #f8fafc;">
                            <td style="padding: 15px 25px; font-weight: 700;">#${index + 1} ${name}</td>
                            <td style="padding: 15px 25px; text-align: right; color: var(--primary); font-weight: 800;">
                                ${parseInt(count).toLocaleString()}
                            </td>
                        </tr>
                    `;
                }).join('');

                // Update Global nationwide total instantly


                const totalDownloads = data.reduce((sum, row) => sum + parseInt(row.issued_count || 0), 0);
                const globalStatsEl = document.getElementById('globalDownloadCount');
                if (globalStatsEl) {
                    const current = parseInt(globalStatsEl.innerText.replace(/,/g, '')) || 0;
                    animateValue(globalStatsEl, current, totalDownloads, 1000);
                }

                if (loader) loader.style.display = 'none';
                if (table) table.style.display = 'table';

            } catch (err) {
                console.warn('Leaderboard load failed:', err);
            }
        }

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString();
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        function closeDistrictDropdown() {
            const districtDropdown = document.getElementById('districtDropdown');
            const districtInput = document.getElementById('districtInput');
            const selectedDistrictHidden = document.getElementById('selectedDistrict');

            districtDropdown.classList.remove('active');
            districtInput.readOnly = true;
            districtInput.placeholder = 'ðŸ” Search or select district...';

            if (selectedDistrictHidden.value) {
                districtInput.value = selectedDistrictHidden.value;
            } else {
                districtInput.value = '';
            }
        }

        function renderDistrictDropdown(districts) {
            const districtList = document.getElementById('districtList');
            const selectedDistrictHidden = document.getElementById('selectedDistrict');

            if (districts.length === 0) {
                districtList.innerHTML = '<div class="premium-dropdown-no-results">No districts found matching search</div>';
                return;
            }

            districtList.innerHTML = districts.map(district => `
                <div class="premium-dropdown-item ${selectedDistrictHidden.value === district ? 'selected' : ''}" 
                     data-district="${district.replace(/'/g, "&apos;")}">
                    <i class="fa-solid fa-location-dot" style="font-size: 0.8rem; opacity: 0.5;"></i>
                    ${district}
                </div>
            `).join('');

            // Add event listeners to newly rendered items
            districtList.querySelectorAll('.premium-dropdown-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const district = item.getAttribute('data-district').replace(/&apos;/g, "'");
                    selectDistrict(district);
                });
            });
        }

        function selectDistrict(district) {
            const districtInput = document.getElementById('districtInput');
            const selectedDistrictHidden = document.getElementById('selectedDistrict');

            selectedDistrictHidden.value = district;
            districtInput.value = district;
            closeDistrictDropdown();

            // Fetch and show district-specific stats
            updateDistrictStats(district);

            // Re-render to update selected state inside the list for next time
            renderDistrictDropdown(globalDistricts);
        };

        function updateAllOtherDistrictSelects(districts) {
            const districtSelects = [
                document.getElementById('districtSelect'),
                document.getElementById('wa_districtSelect')
            ];

            const options = '<option value="">-- Select District --</option>' +
                districts.map(d => `<option value="${d}">${d}</option>`).join('');

            districtSelects.forEach(select => {
                if (select) {
                    select.innerHTML = options;
                    select.disabled = false;

                    // Add listeners for simplified modal/inline logic
                    select.addEventListener('change', () => {
                        const district = select.value;
                        const btn = document.getElementById('modalActionBtn');
                        const data = whatsappData.find(d => d.district === district);

                        if (btn) {
                            btn.disabled = !district;
                            btn.onclick = () => {
                                if (!data) {
                                    alert('Link coming soon for ' + district);
                                    return;
                                }
                                const link = (currentModalType === 'submit') ? data.submit : data.whatsapp;
                                if (link && link.startsWith('http')) {
                                    window.open(link, '_blank');
                                } else {
                                    alert('Link not available yet for ' + district);
                                }
                            };
                        }
                    });
                }
            });
        }

        function updateDistrictDropdown(state) {
            // Deprecated: Results dropdown is now searchable and Supabase-only
        }

        function updateModalButton() {
            // Deprecated: Logic moved to updateAllOtherDistrictSelects
        }

        // ==================== MODAL MANAGEMENT ====================
        let currentModalType = 'whatsapp';
        const MODAL_CONFIG = {
            whatsapp: { title: 'Join WhatsApp Group', description: 'Select your district to join the official group', icon: 'fa-brands fa-whatsapp', btnText: 'Open WhatsApp Group', btnClass: 'btn-whatsapp' },
            submit: { title: 'Submit Answer Sheet', description: 'Select your district to access the submission portal', icon: 'fa-solid fa-paper-plane', btnText: 'Open Submission Portal', btnClass: 'btn-whatsapp' }
        };

        function openModal(type) {
            currentModalType = type || 'whatsapp';
            const config = MODAL_CONFIG[currentModalType];

            document.getElementById('modalTitle').textContent = config.title;
            document.getElementById('modalDescription').textContent = config.description;
            document.getElementById('modalIcon').className = config.icon;
            document.getElementById('modalBtnIcon').className = config.icon;
            document.getElementById('modalBtnText').textContent = config.btnText;
            document.getElementById('modalActionBtn').className = 'modal-action-btn ' + config.btnClass;

            document.getElementById('stateSelect').value = 'India';
            document.getElementById('districtSelect').value = '';
            document.getElementById('modalActionBtn').disabled = true;

            document.getElementById('modalBackdrop').classList.add('show');
        }

        function closeModal() {
            document.getElementById('modalBackdrop').classList.remove('show');
        }

        // Close modal on backdrop click
        document.getElementById('modalBackdrop').addEventListener('click', function (e) {
            if (e.target === this) closeModal();
        });

        // ==================== RESULTS SEARCH ====================


        // DECLARE THIS ONLY ONCE AT THE TOP OF YOUR SCRIPT
        if (typeof isSearchCoolingDown === 'undefined') {
            var isSearchCoolingDown = false;
        }

        async function searchCertificate() {
            // 1. Get Elements with Safety check
            const districtInput = document.getElementById('selectedDistrict');
            const vecInput = document.getElementById('vecCodeInput');
            const searchBtn = document.getElementById('searchBtn');
            const errorDisplay = document.getElementById('errorDisplay');
            const resultDisplay = document.getElementById('resultDisplay');

            // Stop if UI elements are missing (Fixes the "reading style of null" error)
            if (!searchBtn || !errorDisplay || !resultDisplay) return;

            const districtVal = districtInput ? districtInput.value : '';
            const inputVal = vecInput ? vecInput.value.trim() : '';

            if (!districtVal) {
                alert('Please search and select your District first');
                return;
            }
            if (!inputVal) {
                alert('Please enter your Mobile Number or VEC Exam Code');
                return;
            }

            // 2. Prevent spamming during high traffic
            if (isSearchCoolingDown) return;

            // 3. UI Loading State
            searchBtn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i>';
            searchBtn.disabled = true;
            errorDisplay.style.display = 'none';
            resultDisplay.style.display = 'none';
            resultDisplay.innerHTML = '';

            try {
                const upperVal = inputVal.toUpperCase();
                const selectFields = '"Name of Student", "Result Grades", "Link of Certificate", "District", "VEC Exam Code", "Download Count", "School Name", "Standard/Class"';

                // 4. Sequential, index-friendly lookups (prefer equality filters so DB can use indexes)
                // 4a. Try exact VEC Exam Code within the selected district first
                let data = null;

                const { data: byCode, error: errCode } = await sbClient
                    .from('students')
                    .select(selectFields)
                    .eq('District', districtVal)
                    .eq('VEC Exam Code', upperVal)
                    .limit(10);

                if (errCode) throw errCode;
                if (byCode && byCode.length) data = byCode;

                // 4b. If nothing found and input looks numeric, try Mobile Number within district
                if ((!data || data.length === 0) && /^^\d+$/.test(inputVal)) {
                    const { data: byMobile, error: errMobile } = await sbClient
                        .from('students')
                        .select(selectFields)
                        .eq('District', districtVal)
                        .eq('Mobile Number', inputVal)
                        .limit(10);

                    if (errMobile) throw errMobile;
                    if (byMobile && byMobile.length) data = byMobile;
                }

                // 4c. As a last, limited-rescue attempt (small limit) try a relaxed search across districts
                if (!data || data.length === 0) {
                    const { data: fallback, error: errFb } = await sbClient
                        .from('students')
                        .select(selectFields)
                        .or(`"VEC Exam Code".eq.${upperVal},"Mobile Number".eq.${inputVal}`)
                        .limit(5);

                    if (errFb) throw errFb;
                    if (fallback && fallback.length) data = fallback;
                }

                // 5. Render Results (same UI as before)
                if (!data || data.length === 0) {
                    errorDisplay.style.display = 'block';
                    errorDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    errorDisplay.style.display = 'none';
                    resultDisplay.style.display = 'grid';
                    resultDisplay.style.gap = '20px';
                    resultDisplay.innerHTML = '';

                    data.forEach((student, index) => {
                        const safeStudent = JSON.parse(JSON.stringify(student));
                        const resultCard = `\n                    <div class="certificate-box" style="animation-delay: ${index * 0.1}s">\n                        <div class="certificate-icon"><i class="fa-solid fa-crown"></i></div>\n                        <div class="student-name" style="font-size: 1.8rem; font-weight: 800;">${safeStudent["Name of Student"]}</div>\n                        <div class="student-school" style="font-weight: 600; color: #475569;">${safeStudent["School Name"] || ""}</div>\n                        <div class="student-grade" style="color: var(--primary); font-weight: 700; margin-top: 10px;">Result: ${safeStudent["Result Grades"]}</div>\n                        <button onclick=\"handleDownload(this, ${JSON.stringify(safeStudent).replace(/\"/g, '&quot;')} )\" class=\"download-btn\" style=\"margin-top: 20px; width: 100%;\">\n                            <i class=\"fa-solid fa-file-arrow-down\"></i> Download Certificate\n                        </button>\n                    </div>\n                `;
                        resultDisplay.innerHTML += resultCard;
                    });

                    setTimeout(() => {
                        resultDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                    }, 100);
                }
            } catch (error) {
                console.error('Search error:', error);
                alert('Server is busy. Please wait for the countdown.');
            } finally {
                startSearchCountdown(searchBtn);
            }
        }

        function startSearchCountdown(btn) {
            isSearchCoolingDown = true;
            let secondsLeft = 3;

            const timer = setInterval(() => {
                btn.innerHTML = `<span style="font-weight: 800;">${secondsLeft}s</span>`;
                secondsLeft--;

                if (secondsLeft < 0) {
                    clearInterval(timer);
                    isSearchCoolingDown = false;
                    btn.disabled = false;
                    btn.innerHTML = '<i class="fa-solid fa-magnifying-glass"></i>';
                }
            }, 1000);
        }
        // 7. The Countdown Logic (3 seconds)
        function startSearchCountdown(btn) {
            isSearchCoolingDown = true;
            let secondsLeft = 3;

            const timer = setInterval(() => {
                btn.innerHTML = `<span style="font-size: 0.9rem; font-weight: 800;">${secondsLeft}s</span>`;
                secondsLeft--;

                if (secondsLeft < 0) {
                    clearInterval(timer);
                    isSearchCoolingDown = false;
                    btn.disabled = false;
                    btn.innerHTML = '<i class="fa-solid fa-magnifying-glass"></i>';
                }
            }, 1000);
        }
        async function handleDownload(btn, student) {
            const originalContent = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Generating...';

            try {
                const examCode = student["VEC Exam Code"];
                const certUrl = student["Link of Certificate"];

                // 1. Increment the count in the database
                try {
                    await sbClient.rpc('increment_download_count', {
                        exam_code: examCode
                    });

                    // 2. REFRESH EVERYTHING WITH ONE SINGLE CALL
                    // This optimized RPC updates the Leaderboard and Global Counter together
                    await fetchDistrictLeaderboard();

                    // 3. Update the specific District label if selected
                    const currentDistrict = document.getElementById('selectedDistrict').value;
                    if (currentDistrict) {
                        updateDistrictStats(currentDistrict);
                    }

                } catch (rpcErr) {
                    console.warn('Tracking update failed, but proceeding to download:', rpcErr);
                }

                // 4. Handle PDF Delivery
                if (certUrl && String(certUrl).startsWith('http')) {
                    window.open(certUrl, '_blank');
                } else {
                    await generateCertificateFrontend(student);
                }

            } catch (err) {
                console.error('Download error:', err);
                alert('Generation Error. Please try again.');
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalContent;
            }
        }

        async function generateCertificateFrontend(student) {
            const loader = document.getElementById('certLoading');
            loader.style.display = 'flex';

            try {
                // Optimized image source (1MB JPEG)
                const bgUrl = 'images/certificate_template.jpg';

                // Helper to load image
                const loadImage = (url) => new Promise((resolve, reject) => {
                    const img = new Image();
                    img.crossOrigin = "anonymous";
                    img.onload = () => resolve(img);
                    img.onerror = () => reject(new Error('Failed to load certificate background.'));
                    img.src = url;
                });

                const bgImg = await loadImage(bgUrl);

                // Professional Canvas System (A4 at 300 DPI - 3508x2481)
                const canvas = document.createElement('canvas');
                canvas.width = 3508;
                canvas.height = 2481;
                const ctx = canvas.getContext('2d');

                // Step 1: Draw Background
                ctx.drawImage(bgImg, 0, 0, canvas.width, canvas.height);

                // Step 2: Styling settings
                ctx.fillStyle = "#1e293b";
                ctx.textBaseline = "middle";

                // Professional Font definitions (Stylistic & Premium)
                const nameFont = "500 60px 'Georgia', serif"; // Elegant serif for Name
                const bodyFont = "500 40px 'Inter', Arial, sans-serif"; // Cleaner sans-serif
                const smallFont = "500 52px 'Inter', Arial, sans-serif";
                const codeFont = "640 48px 'Courier New', monospace";

                // Improved Title Case
                const toTitleCase = (str) => {
                    if (!str) return "";
                    return str.toLowerCase().replace(/\b\w/g, c => c.toUpperCase());
                };

                // Step 3: Draw Text using Center Alignment for the lines

                // Student Name
                ctx.font = nameFont;
                ctx.fillStyle = "#7c2d12";
                ctx.textAlign = "center";
                ctx.fillText(toTitleCase(student["Name of Student"] || ""), canvas.width * 0.66, canvas.height * 0.485);

                // School Name
                ctx.font = bodyFont;
                ctx.fillStyle = "#1e293b";
                ctx.textAlign = "center";
                ctx.fillText((student["School Name"] || ""), canvas.width * 0.70, canvas.height * 0.535);

                // Standard (Moved to middle of line)
                ctx.font = smallFont;
                ctx.textAlign = "center";
                ctx.fillText((student["Standard/Class"] || ""), canvas.width * 0.525, canvas.height * 0.582);

                // Grade
                ctx.font = "50px 'Inter', sans-serif";
                ctx.textAlign = "center";
                ctx.fillText((student["Result Grades"] || ""), canvas.width * 0.725, canvas.height * 0.582);

                // District / Region (Final positioning - Match color & nudge UP)
                ctx.font = bodyFont;
                ctx.fillStyle = "#1e293b";
                ctx.textAlign = "left";
                const districtPrefix = "District / Region: ";
                const districtText = districtPrefix + (student["District"] || "");
                ctx.fillText(districtText, canvas.width * 0.42, canvas.height * 0.690);

                // Year (Nudged further right)
                ctx.font = smallFont;
                ctx.fillStyle = "#1e293b";
                ctx.textAlign = "center";
                ctx.fillText("2025-26", canvas.width * 0.85, canvas.height * 0.630);

                // Exam Code (Nudged further right)
                ctx.font = codeFont;
                ctx.fillStyle = "#64748b";
                ctx.textAlign = "left";
                ctx.fillText((student["VEC Exam Code"] || ""), canvas.width * 0.24, canvas.height * 0.880);

                // Step 4: Export to PDF
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({
                    orientation: 'landscape',
                    unit: 'px',
                    format: [3508, 2481]
                });

                // Convert canvas to compressed JPEG for the PDF
                const imgData = canvas.toDataURL('image/jpeg', 0.85);
                pdf.addImage(imgData, 'JPEG', 0, 0, 3508, 2481);
                pdf.save(`VEC_Certificate_${student["VEC Exam Code"]}.pdf`);

            } catch (err) {
                console.error('Professional Gen Error:', err);
                alert('Professional Generation Error: ' + err.message);
            } finally {
                loader.style.display = 'none';
            }
        }

        async function trackDownload(examCode, currentCount, url) {
            // Deprecated in favor of handleDownload
        }

        // ==================== UTILITY FUNCTIONS ====================
        function scrollToResults() {
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Counter animation
        function animateCounter(element) {
            const target = parseInt(element.dataset.target);
            const duration = 2000;
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeOut = 1 - Math.pow(1 - progress, 3);
                const current = Math.floor(easeOut * target);

                element.textContent = current.toLocaleString();

                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    element.textContent = target.toLocaleString();
                }
            }

            requestAnimationFrame(update);
        }

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function () {
            // Set footer year
            const footerYear = document.getElementById('footerYear');
            if (footerYear) footerYear.textContent = new Date().getFullYear();

            // Start loading data
            loadWhatsAppData();
            initializeDropdowns();
            initializeInlineWhatsApp();
            initializeResultsDistrictDropdown();

            // Initialize counter animation
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounter(entry.target);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            document.querySelectorAll('.count').forEach(counter => {
                observer.observe(counter);
            });

            // Search button click handler
            document.getElementById('searchBtn').addEventListener('click', searchCertificate);

            // Enter key on search input
            document.getElementById('vecCodeInput').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    searchCertificate();
                }
            });

            // Auto-uppercase input
            document.getElementById('vecCodeInput').addEventListener('input', function (e) {
                this.value = this.value.toUpperCase();
            });
        });
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCGKLZC8M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-TFCGKLZC8M');
    </script>
</body>

</html>